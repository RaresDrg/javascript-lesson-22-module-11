{"mappings":"AAEA,MAGMA,EAAe,IAAIC,gBAAgB,CACvCC,IAHc,mCAIdC,SAAU,KCHZ,MAAMC,EAAU,IDMhB,MACEC,cACEC,KAAKC,YAAc,GACnBD,KAAKE,UAAY,C,CAGnBC,UAGE,OAAOC,MAFK,qCAAeV,KAETW,SACfC,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACJT,KAAKU,gBACED,I,CAIbC,gBACEV,KAAKE,WAAa,C,CAGpBS,YACEX,KAAKE,UAAY,C,GC1BfU,EAAOC,SAASC,eAAe,QAC/BC,EAAeF,SAASC,eAAe,mBACvCE,EAAYH,SAASC,eAAe,WAEpCG,EAAuBC,IAC3B,MAAMC,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiBR,SAASS,gBAEvDH,EAAYE,GAAgBD,EAAe,KAC7CG,EAASL,GACTM,QAAQC,IAAI,S,EAsBhB,SAASF,EAASL,GAGhB,OAFYF,EA8CJU,UAAUC,OAAO,UA5ClB7B,EACJK,UACAG,MAAK,EAACsB,SAAEA,KACkB,IAArBA,GAAUC,OAgDpB,SAAiBX,GAGf,GAFAY,EAAYd,GAEO,WAAfE,EAAMa,KAER,MADAC,EAAmB,+BACb,IAAIC,MAAM,WAGlB,GAAmB,WAAff,EAAMa,KAER,MASFG,OAAOP,OAAO,SAAUV,GAThB,IAAIgB,MAAM,mB,CAzDLE,CAAQjB,GAavB,SAAsBU,GAepB,OAdeA,EACZQ,KAAIC,IACH,MAAMC,OAAEA,EAAMC,MAAEA,EAAKC,YAAEA,EAAWC,IAAEA,EAAGC,WAAEA,GAAeL,EACxD,MAAO,yEAEuBE,8CACCD,GAAU,mCAC5BI,kEACsBF,0BACvBC,0EAEb,IAEAE,KAAK,G,CAxBGC,CAAahB,KAGrBtB,MAAKuC,IACJb,EAAmBa,GACnBf,EAAYd,EAAU,IAEvB8B,OAAMC,GAASC,MAAMD,I,CAqB1B,SAASf,EAAmBa,GAC1B9B,EAAakC,WAAaJ,C,CAW5B,SAASf,EAAYoB,GACnBA,EAAQxB,UAAUyB,IAAI,S,CArExBvC,EAAKwC,iBAAiB,UAAUlC,IAE9BA,EAAMmC,iBACN,MAAMC,EAAa1C,EAAK2C,SAASC,KAAKC,MAAMC,OAEzB,KAAfJ,GAKJxD,EAAQG,YAAcqD,EACtBxD,EAAQa,YAkDRI,EAAakC,UAAY,GA0BzBf,OAAOkB,iBAAiB,SAAUnC,GAxElCM,EAASL,GAAOyC,SAAQ,IAAM/C,EAAKgD,WATjCZ,MAAM,0BASmC","sources":["src/js/NewsApi.js","src/js/03-example-3.js"],"sourcesContent":["import axios from 'axios';\n\nconst ENDPOINT = 'https://newsapi.org/v2/everything';\nconst KEY_API = '1bfb956be4624deab8ea82acf099560b';\n\nconst searchParams = new URLSearchParams({\n  key: KEY_API,\n  pageSize: 10,\n});\n\nclass NewsApi {\n  constructor() {\n    this.searchQuery = '';\n    this.queryPage = 1;\n  }\n\n  getNews() {\n    const url = `${ENDPOINT}?${searchParams}&`;\n\n    return fetch(url, options)\n      .then(response => response.json())\n      .then(data => {\n        this.incrementPage();\n        return data;\n      });\n  }\n\n  incrementPage() {\n    this.queryPage += 1;\n  }\n\n  resetPage() {\n    this.queryPage = 1;\n  }\n}\n\nexport default NewsApi;\n","import NewsApi from './NewsApi.js';\n\n// import Notiflix from 'notiflix';\n\nconst newsApi = new NewsApi();\n\nconst form = document.getElementById('form');\nconst articlesList = document.getElementById('articlesWrapper');\nconst loadingEL = document.getElementById('loading');\n\nconst handleInfiniteScroll = event => {\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n\n  if (scrollTop + clientHeight >= scrollHeight - 25) {\n    loadData(event);\n    console.log('cacat');\n  }\n};\n\nform.addEventListener('submit', event => {\n  debugger;\n  event.preventDefault();\n  const inputValue = form.elements.news.value.trim();\n\n  if (inputValue === '') {\n    alert('Please, write something');\n    return;\n  }\n\n  newsApi.searchQuery = inputValue;\n  newsApi.resetPage();\n\n  clearArticlesList();\n  addScrollEventListener();\n  loadData(event).finally(() => form.reset());\n});\n\nfunction loadData(event) {\n  showElement(loadingEL);\n\n  return newsApi\n    .getNews()\n    .then(({ articles }) => {\n      if (articles?.length === 0) {\n        return onError(event);\n      }\n\n      return createMarkup(articles);\n    })\n\n    .then(markup => {\n      updateArticlesList(markup);\n      hideElement(loadingEL);\n    })\n    .catch(error => alert(error));\n}\n\nfunction createMarkup(articles) {\n  const markup = articles\n    .map(article => {\n      const { author, title, description, url, urlToImage } = article;\n      return `\n      <div class=\"article-card\">\n        <h2 class=\"article-title\">${title}</h2>\n        <h3 class=\"article-author\">${author || 'Anonym'}</h3>\n        <img src=${urlToImage} class=\"article-img\">\n        <p class=\"article-description\">${description}</p>\n        <a href=${url} class=\"article-link\" target=\"_blank\">Read more</a>\n      </div>\n    `;\n    })\n    .join('');\n  return markup;\n}\n\nfunction updateArticlesList(markup) {\n  articlesList.innerHTML += markup;\n}\n\nfunction clearArticlesList() {\n  articlesList.innerHTML = '';\n}\n\nfunction showElement(element) {\n  element.classList.remove('hidden');\n}\n\nfunction hideElement(element) {\n  element.classList.add('hidden');\n}\n\nfunction onError(event) {\n  hideElement(loadingEL);\n\n  if (event.type === 'submit') {\n    updateArticlesList('<h3>Articles not found</h3>');\n    throw new Error('No data');\n  }\n\n  if (event.type === 'scroll') {\n    removeScrollEventListener();\n    throw new Error('No more articles');\n  }\n}\n\nfunction addScrollEventListener() {\n  window.addEventListener('scroll', handleInfiniteScroll);\n}\n\nfunction removeScrollEventListener() {\n  window.remove('scroll', handleInfiniteScroll);\n}\n"],"names":["$3336a5df7ed8ba08$var$searchParams","URLSearchParams","key","pageSize","$b2b200242022f9c2$var$newsApi","constructor","this","searchQuery","queryPage","getNews","fetch","options","then","response","json","data","incrementPage","resetPage","$b2b200242022f9c2$var$form","document","getElementById","$b2b200242022f9c2$var$articlesList","$b2b200242022f9c2$var$loadingEL","$b2b200242022f9c2$var$handleInfiniteScroll","event","scrollTop","scrollHeight","clientHeight","documentElement","$b2b200242022f9c2$var$loadData","console","log","classList","remove","articles","length","$b2b200242022f9c2$var$hideElement","type","$b2b200242022f9c2$var$updateArticlesList","Error","window","$b2b200242022f9c2$var$onError","map","article","author","title","description","url","urlToImage","join","$b2b200242022f9c2$var$createMarkup","markup","catch","error","alert","innerHTML","element","add","addEventListener","preventDefault","inputValue","elements","news","value","trim","finally","reset"],"version":3,"file":"03-example-3.4b8a248e.js.map"}