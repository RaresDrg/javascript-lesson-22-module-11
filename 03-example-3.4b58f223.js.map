{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/js/NewsApi.js","src/js/03-example-3.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","import axios from 'axios';\n\nconst ENDPOINT = 'https://newsapi.org/v2/everything';\nconst KEY_API = '1bfb956be4624deab8ea82acf099560b';\n\nconst searchParams = new URLSearchParams({\n  key: KEY_API,\n  pageSize: 10,\n});\n\nclass NewsApi {\n  constructor() {\n    this.searchQuery = '';\n    this.queryPage = 1;\n  }\n\n  getNews() {\n    const url = `${ENDPOINT}?${searchParams}&`;\n\n    return fetch(url, options)\n      .then(response => response.json())\n      .then(data => {\n        this.incrementPage();\n        return data;\n      });\n  }\n\n  incrementPage() {\n    this.queryPage += 1;\n  }\n\n  resetPage() {\n    this.queryPage = 1;\n  }\n}\n\nexport default NewsApi;\n","import NewsApi from './NewsApi.js';\n\n// import Notiflix from 'notiflix';\n\nconst newsApi = new NewsApi();\n\nconst form = document.getElementById('form');\nconst articlesList = document.getElementById('articlesWrapper');\nconst loadingEL = document.getElementById('loading');\n\nconst handleInfiniteScroll = event => {\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n\n  if (scrollTop + clientHeight >= scrollHeight - 25) {\n    loadData(event);\n    console.log('cacat');\n  }\n};\n\nform.addEventListener('submit', event => {\n  debugger;\n  event.preventDefault();\n  const inputValue = form.elements.news.value.trim();\n\n  if (inputValue === '') {\n    alert('Please, write something');\n    return;\n  }\n\n  newsApi.searchQuery = inputValue;\n  newsApi.resetPage();\n\n  clearArticlesList();\n  addScrollEventListener();\n  loadData(event).finally(() => form.reset());\n});\n\nfunction loadData(event) {\n  showElement(loadingEL);\n\n  return newsApi\n    .getNews()\n    .then(({ articles }) => {\n      if (articles?.length === 0) {\n        return onError(event);\n      }\n\n      return createMarkup(articles);\n    })\n\n    .then(markup => {\n      updateArticlesList(markup);\n      hideElement(loadingEL);\n    })\n    .catch(error => alert(error));\n}\n\nfunction createMarkup(articles) {\n  const markup = articles\n    .map(article => {\n      const { author, title, description, url, urlToImage } = article;\n      return `\n      <div class=\"article-card\">\n        <h2 class=\"article-title\">${title}</h2>\n        <h3 class=\"article-author\">${author || 'Anonym'}</h3>\n        <img src=${urlToImage} class=\"article-img\">\n        <p class=\"article-description\">${description}</p>\n        <a href=${url} class=\"article-link\" target=\"_blank\">Read more</a>\n      </div>\n    `;\n    })\n    .join('');\n  return markup;\n}\n\nfunction updateArticlesList(markup) {\n  articlesList.innerHTML += markup;\n}\n\nfunction clearArticlesList() {\n  articlesList.innerHTML = '';\n}\n\nfunction showElement(element) {\n  element.classList.remove('hidden');\n}\n\nfunction hideElement(element) {\n  element.classList.add('hidden');\n}\n\nfunction onError(event) {\n  hideElement(loadingEL);\n\n  if (event.type === 'submit') {\n    updateArticlesList('<h3>Articles not found</h3>');\n    throw new Error('No data');\n  }\n\n  if (event.type === 'scroll') {\n    removeScrollEventListener();\n    throw new Error('No more articles');\n  }\n}\n\nfunction addScrollEventListener() {\n  window.addEventListener('scroll', handleInfiniteScroll);\n}\n\nfunction removeScrollEventListener() {\n  window.remove('scroll', handleInfiniteScroll);\n}\n"],"names":["Object","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$68227839101bb5c9$var$searchParams","URLSearchParams","pageSize","$4dac5ee191c1e066$var$newsApi","NewsApi","this","searchQuery","queryPage","url","concat","fetch","options","then","response","json","data","_this","incrementPage","$4dac5ee191c1e066$var$form","document","getElementById","$4dac5ee191c1e066$var$articlesList","$4dac5ee191c1e066$var$loadingEL","$4dac5ee191c1e066$var$handleInfiniteScroll","event","_documentElement","documentElement","scrollTop","scrollHeight","clientHeight","$4dac5ee191c1e066$var$loadData","console","log","classList","remove","getNews","param","articles","$4dac5ee191c1e066$var$hideElement","type","$4dac5ee191c1e066$var$updateArticlesList","Error","window","$4dac5ee191c1e066$var$onError","map","article","author","title","description","urlToImage","join","$4dac5ee191c1e066$var$createMarkup","markup","catch","error","alert","innerHTML","element","add","addEventListener","preventDefault","inputValue","elements","news","trim","resetPage","finally","reset"],"version":3,"file":"03-example-3.4b58f223.js.map"}